<?xml version="1.0" encoding="iso-8859-1" standalone="no"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>OpenGL Image</title><meta content="en" http-equiv="Content-Language" /><meta content="application/xhtml+xml; charset=iso-8859-1" http-equiv="Content-Type" /><meta content="G-Truc Creation" name="copyright" /><link type="text/css" media="screen, print, embossed" rel="stylesheet" href="../common/style.css" /><link type="text/css" media="screen, print, embossed" rel="stylesheet" href="../common/code.css" /><script type="text/javascript">
				var _gaq = _gaq || [];
				_gaq.push(['_setAccount', 'UA-20182250-1']);
				_gaq.push(['_setDomainName', '.g-truc.net']);
				_gaq.push(['_trackPageview']);

				(function() 
				{
					var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
					ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
					var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
				})();
			</script></head><body><div class="root"><div class="version"><div><a href="http://glm.g-truc.net">GLM</a> <a class="active" href="http://gli.g-truc.net">GLI</a> </div><a href="../0.8.2/index.html">0.8.2</a> <a href="../0.8.1/index.html">0.8.1</a> <a href="../0.8.0/index.html">0.8.0</a> <a href="../0.7.0/index.html" class="active">0.7.0</a> <a href="../0.6.1/index.html">0.6.1</a> <a href="../0.6.0/index.html">0.6.0</a> </div><table><tr><td class="menu"><div class="menu"><div class="menu-logo"><a href="./index.html"><img alt="Logo" src="../common/logo.png" class="menu-img" /></a></div><div class="menu-entry1"><a href="https://github.com/g-truc/gli/releases/download/0.7.0.0/gli-0.7.0.0.zip" class="menu"><div>Download GLI 0.7.0.0</div><div>2015-09-01</div></a></div><div class="menu-entry1"><div class="menu-entry2"><a class="menu" href="../0.7.0/api/index.html">API Documentation</a></div><div class="menu-entry2"><a class="menu" href="../0.7.0/code.html">Code Samples</a></div><div class="menu-entry2"><a class="menu" href="https://github.com/g-truc/gli/archive/0.7.0.zip">Snapshot</a></div><div class="menu-entry2"><a href="https://drone.io/github.com/g-truc/gli"><img alt="Build Status" src="https://drone.io/github.com/g-truc/gli/status.png" class="menu-img" /></a></div></div><div class="menu-entry1"><div class="menu-entry2"><a class="menu" href="../0.7.0/updates.html">Release Notes</a></div><div class="menu-entry2"><a class="menu" href="https://github.com/g-truc/gli/releases">Downloads</a></div><div class="menu-entry2"><a class="menu" href="https://github.com/g-truc/gli">Repository</a></div><div class="menu-entry2"><a class="menu" href="https://github.com/g-truc/gli/issues">Feedback</a></div></div><div class="menu-entry1"><div class="menu-entry2"><a class="menu" href="http://www.opengl.org/discussion_boards/ubbthreads.php?ubb=postlist&amp;Board=10&amp;page=1">Forum</a></div><div class="menu-entry2"><a class="menu" href="http://stackoverflow.com/search?q=GLI">Stack Overflow</a></div></div><br /><div><a href="https://twitter.com/g_truc"><img alt="RSS" src="../twitter.png" class="menu-img" /></a></div><br /><div><a href="../feed.rss"><img alt="RSS" src="../rss.png" class="menu-img" /></a></div><br /><br /><div><a href="http://www.g-truc.net"><img alt="G-Truc Creation" src="../common/g-truc.jpg" class="menu-img" /></a></div></div></td><td class="page"><h3>Code samples</h3><span class="code-title">Create OpenGL texture object from a file with the corresponding target:</span><ul class="code-list"><li class="code-line"><span class="code-line-content"><span class="keyword">#include </span><span class="string">&lt;gli/texture.hpp&gt;</span></span></li><li class="code-line"><span class="code-line-content"><span class="keyword">#include </span><span class="string">&lt;gli/load.hpp&gt;</span></span></li><li class="code-line"><span class="code-line-content"><span class="keyword">#include </span><span class="string">&lt;gli/save.hpp&gt;</span></span></li><li class="code-line"><span class="code-line-content"><span class="keyword">#include </span><span class="string">&lt;gli/gl.hpp&gt;</span></span></li><li class="code-line"><span class="code-line-content" /></li><li class="code-line"><span class="code-line-content"><span class="comment">/// Filename can be KTX or DDS files</span></span></li><li class="code-line"><span class="code-line-content">GLuint createTexture(char <span class="keyword">const</span>* Filename)</span></li><li class="code-line"><span class="code-line-content">{</span></li><li class="code-line"><span style="padding-left:32px" class="code-line-content">gli::texture Texture = gli::load(Filename);</span></li><li class="code-line"><span style="padding-left:32px" class="code-line-content"><span class="keyword">if</span>(Texture.empty())</span></li><li class="code-line"><span style="padding-left:64px" class="code-line-content"><span class="keyword">return</span> 0;</span></li><li class="code-line"><span class="code-line-content" /></li><li class="code-line"><span style="padding-left:32px" class="code-line-content">gli::gl GL;</span></li><li class="code-line"><span style="padding-left:32px" class="code-line-content">gli::gl::format <span class="keyword">const</span> Format = GL.translate(Texture.format());</span></li><li class="code-line"><span style="padding-left:32px" class="code-line-content">GLenum Target = GL.translate(Texture.target());</span></li><li class="code-line"><span class="code-line-content" /></li><li class="code-line"><span style="padding-left:32px" class="code-line-content">GLuint TextureName = 0;</span></li><li class="code-line"><span style="padding-left:32px" class="code-line-content">glGenTextures(1, &amp;TextureName);</span></li><li class="code-line"><span style="padding-left:32px" class="code-line-content">glBindTexture(Target, TextureName);</span></li><li class="code-line"><span style="padding-left:32px" class="code-line-content">glTexParameteri(Target, GL_TEXTURE_BASE_LEVEL, 0);</span></li><li class="code-line"><span style="padding-left:32px" class="code-line-content">glTexParameteri(Target, GL_TEXTURE_MAX_LEVEL, <span class="keyword">static_cast</span>&lt;GLint&gt;(Texture.levels() - 1));</span></li><li class="code-line"><span style="padding-left:32px" class="code-line-content">glTexParameteri(Target, GL_TEXTURE_SWIZZLE_R, Format.Swizzle[0]);</span></li><li class="code-line"><span style="padding-left:32px" class="code-line-content">glTexParameteri(Target, GL_TEXTURE_SWIZZLE_G, Format.Swizzle[1]);</span></li><li class="code-line"><span style="padding-left:32px" class="code-line-content">glTexParameteri(Target, GL_TEXTURE_SWIZZLE_B, Format.Swizzle[2]);</span></li><li class="code-line"><span style="padding-left:32px" class="code-line-content">glTexParameteri(Target, GL_TEXTURE_SWIZZLE_A, Format.Swizzle[3]);</span></li><li class="code-line"><span class="code-line-content" /></li><li class="code-line"><span style="padding-left:32px" class="code-line-content">glm::tvec3&lt;GLsizei&gt; <span class="keyword">const</span> Dimensions(Texture.dimensions());</span></li><li class="code-line"><span style="padding-left:32px" class="code-line-content">GLsizei <span class="keyword">const</span> FaceTotal = <span class="keyword">static_cast</span>&lt;GLsizei&gt;(Texture.layers() * Texture.faces());</span></li><li class="code-line"><span class="code-line-content" /></li><li class="code-line"><span style="padding-left:32px" class="code-line-content"><span class="keyword">switch</span>(Texture.target())</span></li><li class="code-line"><span style="padding-left:32px" class="code-line-content">{</span></li><li class="code-line"><span style="padding-left:32px" class="code-line-content"><span class="keyword">case</span> gli::TARGET_1D:</span></li><li class="code-line"><span style="padding-left:64px" class="code-line-content">glTexStorage1D(Target, <span class="keyword">static_cast</span>&lt;GLint&gt;(Texture.levels()), Format.Internal, Dimensions.x);</span></li><li class="code-line"><span style="padding-left:64px" class="code-line-content"><span class="keyword">break</span>;</span></li><li class="code-line"><span style="padding-left:32px" class="code-line-content"><span class="keyword">case</span> gli::TARGET_1D_ARRAY:</span></li><li class="code-line"><span style="padding-left:32px" class="code-line-content"><span class="keyword">case</span> gli::TARGET_2D:</span></li><li class="code-line"><span style="padding-left:32px" class="code-line-content"><span class="keyword">case</span> gli::TARGET_CUBE:</span></li><li class="code-line"><span style="padding-left:64px" class="code-line-content">glTexStorage2D(</span></li><li class="code-line"><span style="padding-left:96px" class="code-line-content">Target, <span class="keyword">static_cast</span>&lt;GLint&gt;(Texture.levels()), Format.Internal,</span></li><li class="code-line"><span style="padding-left:96px" class="code-line-content">Dimensions.x, Texture.target() == gli::TARGET_2D ? Dimensions.y : FaceTotal);</span></li><li class="code-line"><span style="padding-left:64px" class="code-line-content"><span class="keyword">break</span>;</span></li><li class="code-line"><span style="padding-left:32px" class="code-line-content"><span class="keyword">case</span> gli::TARGET_2D_ARRAY:</span></li><li class="code-line"><span style="padding-left:32px" class="code-line-content"><span class="keyword">case</span> gli::TARGET_3D:</span></li><li class="code-line"><span style="padding-left:32px" class="code-line-content"><span class="keyword">case</span> gli::TARGET_CUBE_ARRAY:</span></li><li class="code-line"><span style="padding-left:64px" class="code-line-content">glTexStorage3D(</span></li><li class="code-line"><span style="padding-left:96px" class="code-line-content">Target, <span class="keyword">static_cast</span>&lt;GLint&gt;(Texture.levels()), Format.Internal,</span></li><li class="code-line"><span style="padding-left:96px" class="code-line-content">Dimensions.x, Dimensions.y, Texture.target() == gli::TARGET_3D ? Dimensions.z : FaceTotal);</span></li><li class="code-line"><span style="padding-left:64px" class="code-line-content"><span class="keyword">break</span>;</span></li><li class="code-line"><span style="padding-left:32px" class="code-line-content"><span class="keyword">default</span>: assert(0); break;</span></li><li class="code-line"><span style="padding-left:32px" class="code-line-content">}</span></li><li class="code-line"><span class="code-line-content" /></li><li class="code-line"><span style="padding-left:32px" class="code-line-content"><span class="keyword">for</span>(std::size_t Layer = 0; Layer &lt; Texture.layers(); ++Layer)</span></li><li class="code-line"><span style="padding-left:32px" class="code-line-content"><span class="keyword">for</span>(std::size_t Face = 0; Face &lt; Texture.faces(); ++Face)</span></li><li class="code-line"><span style="padding-left:32px" class="code-line-content"><span class="keyword">for</span>(std::size_t Level = 0; Level &lt; Texture.levels(); ++Level)</span></li><li class="code-line"><span style="padding-left:32px" class="code-line-content">{</span></li><li class="code-line"><span style="padding-left:64px" class="code-line-content">GLsizei <span class="keyword">const</span> LayerGL = <span class="keyword">static_cast</span>&lt;GLsizei&gt;(Layer);</span></li><li class="code-line"><span style="padding-left:64px" class="code-line-content">glm::tvec3&lt;GLsizei&gt; Dimensions(Texture.dimensions(Level));</span></li><li class="code-line"><span style="padding-left:64px" class="code-line-content"><span class="keyword">if</span>(gli::is_target_cube(Texture.target()))</span></li><li class="code-line"><span style="padding-left:96px" class="code-line-content">Target = <span class="keyword">static_cast</span>&lt;GLenum&gt;(GL_TEXTURE_CUBE_MAP_POSITIVE_X + Face);</span></li><li class="code-line"><span class="code-line-content" /></li><li class="code-line"><span style="padding-left:64px" class="code-line-content"><span class="keyword">switch</span>(Texture.target())</span></li><li class="code-line"><span style="padding-left:64px" class="code-line-content">{</span></li><li class="code-line"><span style="padding-left:64px" class="code-line-content"><span class="keyword">case</span> gli::TARGET_1D:</span></li><li class="code-line"><span style="padding-left:96px" class="code-line-content"><span class="keyword">if</span>(gli::is_compressed(Texture.format()))</span></li><li class="code-line"><span style="padding-left:128px" class="code-line-content">glCompressedTexSubImage1D(</span></li><li class="code-line"><span style="padding-left:160px" class="code-line-content">Target, <span class="keyword">static_cast</span>&lt;GLint&gt;(Level), 0, Dimensions.x,</span></li><li class="code-line"><span style="padding-left:160px" class="code-line-content">Format.Internal, <span class="keyword">static_cast</span>&lt;GLsizei&gt;(Texture.size(Level)),</span></li><li class="code-line"><span style="padding-left:160px" class="code-line-content">Texture.data(Layer, Face, Level));</span></li><li class="code-line"><span style="padding-left:96px" class="code-line-content"><span class="keyword">else</span></span></li><li class="code-line"><span style="padding-left:128px" class="code-line-content">glTexSubImage1D(</span></li><li class="code-line"><span style="padding-left:160px" class="code-line-content">Target, <span class="keyword">static_cast</span>&lt;GLint&gt;(Level), 0, Dimensions.x, Format.External, Format.Type,</span></li><li class="code-line"><span style="padding-left:160px" class="code-line-content">Texture.data(Layer, Face, Level));</span></li><li class="code-line"><span style="padding-left:96px" class="code-line-content"><span class="keyword">break</span>;</span></li><li class="code-line"><span style="padding-left:64px" class="code-line-content"><span class="keyword">case</span> gli::TARGET_1D_ARRAY:</span></li><li class="code-line"><span style="padding-left:64px" class="code-line-content"><span class="keyword">case</span> gli::TARGET_2D:</span></li><li class="code-line"><span style="padding-left:64px" class="code-line-content"><span class="keyword">case</span> gli::TARGET_CUBE:</span></li><li class="code-line"><span style="padding-left:96px" class="code-line-content"><span class="keyword">if</span>(gli::is_compressed(Texture.format()))</span></li><li class="code-line"><span style="padding-left:128px" class="code-line-content">glCompressedTexSubImage2D(</span></li><li class="code-line"><span style="padding-left:160px" class="code-line-content">Target, <span class="keyword">static_cast</span>&lt;GLint&gt;(Level), 0, 0,</span></li><li class="code-line"><span style="padding-left:160px" class="code-line-content">Dimensions.x, Texture.target() == gli::TARGET_1D_ARRAY ? : Dimensions.y,</span></li><li class="code-line"><span style="padding-left:160px" class="code-line-content">Format.Internal, <span class="keyword">static_cast</span>&lt;GLsizei&gt;(Texture.size(Level)),</span></li><li class="code-line"><span style="padding-left:160px" class="code-line-content">Texture.data(Layer, Face, Level));</span></li><li class="code-line"><span style="padding-left:96px" class="code-line-content"><span class="keyword">else</span></span></li><li class="code-line"><span style="padding-left:128px" class="code-line-content">glTexSubImage2D(</span></li><li class="code-line"><span style="padding-left:160px" class="code-line-content">Target, <span class="keyword">static_cast</span>&lt;GLint&gt;(Level), 0, 0,</span></li><li class="code-line"><span style="padding-left:160px" class="code-line-content">Dimensions.x, Texture.target() == gli::TARGET_1D_ARRAY ? LayerGL : Dimensions.y,</span></li><li class="code-line"><span style="padding-left:160px" class="code-line-content">Format.External, Format.Type, Texture.data(Layer, Face, Level));</span></li><li class="code-line"><span style="padding-left:96px" class="code-line-content"><span class="keyword">break;</span></span></li><li class="code-line"><span style="padding-left:64px" class="code-line-content"><span class="keyword">case</span> gli::TARGET_2D_ARRAY:</span></li><li class="code-line"><span style="padding-left:64px" class="code-line-content"><span class="keyword">case</span> gli::TARGET_3D:</span></li><li class="code-line"><span style="padding-left:64px" class="code-line-content"><span class="keyword">case</span> gli::TARGET_CUBE_ARRAY:</span></li><li class="code-line"><span style="padding-left:96px" class="code-line-content"><span class="keyword">if</span>(gli::is_compressed(Texture.format()))</span></li><li class="code-line"><span style="padding-left:128px" class="code-line-content">glCompressedTexSubImage3D(</span></li><li class="code-line"><span style="padding-left:160px" class="code-line-content">Target, <span class="keyword">static_cast</span>&lt;GLint&gt;(Level), 0, 0, 0,</span></li><li class="code-line"><span style="padding-left:160px" class="code-line-content">Dimensions.x, Dimensions.y, Texture.target() == gli::TARGET_3D ? Dimensions.z : LayerGL,</span></li><li class="code-line"><span style="padding-left:160px" class="code-line-content">Format.Internal, <span class="keyword">static_cast</span>&lt;GLsizei&gt;(Texture.size(Level)),</span></li><li class="code-line"><span style="padding-left:160px" class="code-line-content">Texture.data(Layer, Face, Level));</span></li><li class="code-line"><span style="padding-left:96px" class="code-line-content"><span class="keyword">else</span></span></li><li class="code-line"><span style="padding-left:128px" class="code-line-content">glTexSubImage3D(</span></li><li class="code-line"><span style="padding-left:160px" class="code-line-content">Target, <span class="keyword">static_cast</span>&lt;GLint&gt;(Level), 0, 0, 0,</span></li><li class="code-line"><span style="padding-left:160px" class="code-line-content">Dimensions.x, Dimensions.y, Texture.target() == gli::TARGET_3D ? Dimensions.z : LayerGL,</span></li><li class="code-line"><span style="padding-left:160px" class="code-line-content">Format.External, Format.Type, Texture.data(Layer, Face, Level));</span></li><li class="code-line"><span style="padding-left:96px" class="code-line-content"><span class="keyword">break</span>;</span></li><li class="code-line"><span style="padding-left:64px" class="code-line-content"><span class="keyword">default</span>: assert(0); <span class="keyword">break</span>;</span></li><li class="code-line"><span style="padding-left:64px" class="code-line-content">}</span></li><li class="code-line"><span style="padding-left:32px" class="code-line-content">}</span></li><li class="code-line"><span style="padding-left:32px" class="code-line-content"><span class="keyword">return</span> TextureName;</span></li><li class="code-line"><span class="code-line-content">}</span></li></ul><span class="code-title">Create a texture and clear it with orange:</span><ul class="code-list"><li class="code-line"><span class="code-line-content"><span class="keyword">#include </span><span class="string">&lt;gli/texture2d.hpp&gt;</span></span></li><li class="code-line"><span class="code-line-content" /></li><li class="code-line"><span class="code-line-content">gli::texture2D CreateTextureRGBA8(gli::texture2D::dim_type <span class="keyword">const</span> &amp; Dim)</span></li><li class="code-line"><span class="code-line-content">{</span></li><li class="code-line"><span style="padding-left:32px" class="code-line-content">gli::texture2D Texture(gli::FORMAT_RGBA8_UNORM, Dim);</span></li><li class="code-line"><span style="padding-left:32px" class="code-line-content">Texture.clear&lt;glm::u8vec4&gt;(glm::u8vec4(255, 127, 0, 255));</span></li><li class="code-line"><span class="code-line-content" /></li><li class="code-line"><span style="padding-left:32px" class="code-line-content"><span class="keyword">return</span> Texture;</span></li><li class="code-line"><span class="code-line-content">}</span></li></ul><span class="code-title">Loading saving and comparing textures:</span><ul class="code-list"><li class="code-line"><span class="code-line-content"><span class="keyword">#include </span><span class="string">&lt;gli/gli.hpp&gt;</span></span></li><li class="code-line"><span class="code-line-content" /></li><li class="code-line"><span class="code-line-content"><span class="keyword">int</span> test_dds(std::string <span class="keyword">const</span> &amp; Filename)</span></li><li class="code-line"><span class="code-line-content">{</span></li><li class="code-line"><span style="padding-left:32px" class="code-line-content"><span class="keyword">int</span> Error(0);</span></li><li class="code-line"><span class="code-line-content" /></li><li class="code-line"><span style="padding-left:32px" class="code-line-content">gli::texture TextureA = gli::load(Filename);</span></li><li class="code-line"><span style="padding-left:32px" class="code-line-content">gli::save(TextureA, "test.dds");</span></li><li class="code-line"><span style="padding-left:32px" class="code-line-content">gli::texture TextureB = gli::load("test.dds");</span></li><li class="code-line"><span class="code-line-content" /></li><li class="code-line"><span style="padding-left:32px" class="code-line-content">Error += TextureA == TextureB ? 0 : 1;</span></li><li class="code-line"><span class="code-line-content" /></li><li class="code-line"><span style="padding-left:32px" class="code-line-content"><span class="keyword">return</span> Error;</span></li><li class="code-line"><span class="code-line-content">}</span></li><li class="code-line"><span class="code-line-content" /></li><li class="code-line"><span class="code-line-content"><span class="keyword">int</span> test_ktx(std::string <span class="keyword">const</span> &amp; Filename)</span></li><li class="code-line"><span class="code-line-content">{</span></li><li class="code-line"><span style="padding-left:32px" class="code-line-content"><span class="keyword">int</span> Error(0);</span></li><li class="code-line"><span class="code-line-content" /></li><li class="code-line"><span style="padding-left:32px" class="code-line-content">gli::texture TextureA = gli::load(Filename);</span></li><li class="code-line"><span style="padding-left:32px" class="code-line-content">gli::save(TextureA, "test.ktx");</span></li><li class="code-line"><span style="padding-left:32px" class="code-line-content">gli::texture TextureB = gli::load("test.ktx");</span></li><li class="code-line"><span class="code-line-content" /></li><li class="code-line"><span style="padding-left:32px" class="code-line-content">Error += TextureA == TextureB ? 0 : 1;</span></li><li class="code-line"><span class="code-line-content" /></li><li class="code-line"><span style="padding-left:32px" class="code-line-content"><span class="keyword">return</span> Error;</span></li><li class="code-line"><span class="code-line-content">}</span></li></ul></td></tr></table></div></body></html>