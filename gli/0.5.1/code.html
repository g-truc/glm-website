<?xml version="1.0" encoding="iso-8859-1" standalone="no"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>OpenGL Image</title><meta content="en" http-equiv="Content-Language" /><meta content="application/xhtml+xml; charset=iso-8859-1" http-equiv="Content-Type" /><meta content="G-Truc Creation" name="copyright" /><link type="text/css" media="screen, print, embossed" rel="stylesheet" href="../common/style.css" /><link type="text/css" media="screen, print, embossed" rel="stylesheet" href="../common/code.css" /><script type="text/javascript">
				var _gaq = _gaq || [];
				_gaq.push(['_setAccount', 'UA-20182250-1']);
				_gaq.push(['_setDomainName', '.g-truc.net']);
				_gaq.push(['_trackPageview']);

				(function() 
				{
					var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
					ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
					var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
				})();
			</script></head><body><div class="root"><div class="version"><div><a href="http://glm.g-truc.net">GLM</a> <a class="active" href="http://gli.g-truc.net">GLI</a> </div><a href="../0.8.1/index.html">0.8.1</a> <a href="../0.8.0/index.html">0.8.0</a> <a href="../0.7.0/index.html">0.7.0</a> <a href="../0.6.1/index.html">0.6.1</a> <a href="../0.6.0/index.html">0.6.0</a> </div><table><tr><td class="menu"><div class="menu"><div class="menu-logo"><a href="./index.html"><img alt="Logo" src="../common/logo.png" class="menu-img" /></a></div><div class="menu-entry1"><a href="https://sourceforge.net/projects/ogl-image/files/gli-0.5.1.1/gli-0.5.1.1.zip/download" class="menu"><div>Download GLI 0.5.1.1</div><div>2014-01-20</div></a></div><br /><div><a href="https://twitter.com/g_truc"><img alt="RSS" src="../twitter.png" class="menu-img" /></a></div><br /><div><a href="../feed.rss"><img alt="RSS" src="../rss.png" class="menu-img" /></a></div><br /><br /><div><a href="http://www.g-truc.net"><img alt="G-Truc Creation" src="../common/g-truc.jpg" class="menu-img" /></a></div></div></td><td class="page"><h3>Code samples</h3><span class="code-title">Create GLI texture views and copies:</span><ul class="code-list"><li class="code-line"><span class="code-line-content"><span class="keyword">#include </span><span class="string">&lt;gli/gli.hpp&gt;</span></span></li><li class="code-line"><span class="code-line-content" /></li><li class="code-line"><span class="code-line-content">gli::texture2DArray TextureArray(gli::load_dds("texture.dds"));</span></li><li class="code-line"><span class="code-line-content" /></li><li class="code-line"><span class="code-line-content">gli::texture2DArray TextureViewA(TextureArray, </span></li><li class="code-line"><span style="padding-left:32px" class="code-line-content">TextureArray.baseLayer(), TextureArray.maxLayer(), </span></li><li class="code-line"><span style="padding-left:32px" class="code-line-content">TextureArray.baseLevel() + 1, TextureArray.maxLevel());</span></li><li class="code-line"><span class="code-line-content" /></li><li class="code-line"><span class="code-line-content">gli::texture2D TextureViewB(TextureArray, </span></li><li class="code-line"><span style="padding-left:32px" class="code-line-content">TextureArray.baseLayer(), </span></li><li class="code-line"><span style="padding-left:32px" class="code-line-content">TextureArray.baseLevel(), TextureArray.maxLevel());</span></li><li class="code-line"><span class="code-line-content" /></li><li class="code-line"><span class="code-line-content"><span class="comment">// Equivalent to the contructor usage</span></span></li><li class="code-line"><span class="code-line-content">gli::texture2D TextureViewC(gli::view(TextureArray, </span></li><li class="code-line"><span style="padding-left:32px" class="code-line-content">TextureArray.baseLayer(), </span></li><li class="code-line"><span style="padding-left:32px" class="code-line-content">TextureArray.baseLevel(), TextureArray.maxLevel());</span></li><li class="code-line"><span class="code-line-content" /></li><li class="code-line"><span class="code-line-content"><span class="comment">// Allocate a new storage matching the memory size accessible by TextureViewC</span></span></li><li class="code-line"><span class="code-line-content">gli::texture2D TextureCopyC(gli::copy(TextureViewC);</span></li><li class="code-line"><span class="code-line-content" /></li><li class="code-line"><span class="code-line-content">gli::texture2DArray TextureCopyA(gli::copy(TextureArray, </span></li><li class="code-line"><span style="padding-left:32px" class="code-line-content">TextureArray.baseLayer(), TextureArray.maxLayer(), </span></li><li class="code-line"><span style="padding-left:32px" class="code-line-content">TextureArray.baseLevel() + 1, TextureArray.maxLevel());</span></li><li class="code-line"><span class="code-line-content" /></li></ul><span class="code-title">Loading an OpenGL texture:</span><ul class="code-list"><li class="code-line"><span class="code-line-content"><span class="keyword">#include </span><span class="string">&lt;gli/gli.hpp&gt;</span></span></li><li class="code-line"><span class="code-line-content" /></li><li class="code-line"><span class="code-line-content">gli::storage Storage(gli::load_dds("texture.dds"));</span></li><li class="code-line"><span class="code-line-content">assert(!Storage.empty())</span></li><li class="code-line"><span class="code-line-content" /></li><li class="code-line"><span class="code-line-content">GLenum Target = Storage.layers() &gt; 1 ? GL_TEXTURE_2D_ARRAY : GL_TEXTURE_2D;</span></li><li class="code-line"><span class="code-line-content" /></li><li class="code-line"><span class="code-line-content">glGenTextures(1, &amp;TextureName);</span></li><li class="code-line"><span class="code-line-content">glBindTexture(Target, TextureName);</span></li><li class="code-line"><span class="code-line-content">glTexParameteri(Target, GL_TEXTURE_BASE_LEVEL, 0);</span></li><li class="code-line"><span class="code-line-content">glTexParameteri(Target, GL_TEXTURE_MAX_LEVEL, static_cast&lt;GLint&gt;(Texture.levels() - 1));</span></li><li class="code-line"><span class="code-line-content">glTexParameteri(Target, GL_TEXTURE_MIN_FILTER, Texture.levels() &gt; 1 ? GL_LINEAR_MIPMAP_LINEAR : GL_LINEAR);</span></li><li class="code-line"><span class="code-line-content">glTexParameteri(Target, GL_TEXTURE_MAG_FILTER, GL_LINEAR);</span></li><li class="code-line"><span class="code-line-content" /></li><li class="code-line"><span class="code-line-content"><span class="keyword">if</span>(Storage.layers() &gt; 1)</span></li><li class="code-line"><span class="code-line-content">{</span></li><li class="code-line"><span style="padding-left:32px" class="code-line-content">gli::texture2DArray Texture(Storage);</span></li><li class="code-line"><span style="padding-left:32px" class="code-line-content" /></li><li class="code-line"><span style="padding-left:32px" class="code-line-content">glTexStorage3D(Target, static_cast&lt;GLint&gt;(Texture.levels()),</span></li><li class="code-line"><span style="padding-left:64px" class="code-line-content">static_cast&lt;GLenum&gt;(gli::internal_format(Texture.format())),</span></li><li class="code-line"><span style="padding-left:64px" class="code-line-content">static_cast&lt;GLsizei&gt;(Texture.dimensions().x), </span></li><li class="code-line"><span style="padding-left:64px" class="code-line-content">static_cast&lt;GLsizei&gt;(Texture.dimensions().y),</span></li><li class="code-line"><span style="padding-left:64px" class="code-line-content">static_cast&lt;GLsizei&gt;(Texture.layers()));</span></li><li class="code-line"><span style="padding-left:32px" class="code-line-content" /></li><li class="code-line"><span style="padding-left:32px" class="code-line-content"><span class="keyword">if</span>(gli::is_compressed(Texture.format()))</span></li><li class="code-line"><span style="padding-left:32px" class="code-line-content">{</span></li><li class="code-line"><span style="padding-left:64px" class="code-line-content"><span class="keyword">for</span>(gli::texture2DArray::size_type Layer = 0; Layer &lt; Texture.layers(); ++Layer)</span></li><li class="code-line"><span style="padding-left:64px" class="code-line-content"><span class="keyword">for</span>(gli::texture2DArray::size_type Level = 0; Level &lt; Texture.levels(); ++Level)</span></li><li class="code-line"><span style="padding-left:64px" class="code-line-content">{</span></li><li class="code-line"><span style="padding-left:96px" class="code-line-content">glCompressedTexSubImage3D(Target, </span></li><li class="code-line"><span style="padding-left:128px" class="code-line-content">static_cast&lt;GLint&gt;(Level), </span></li><li class="code-line"><span style="padding-left:128px" class="code-line-content">0, 0, static_cast&lt;GLint&gt;(Layer), </span></li><li class="code-line"><span style="padding-left:128px" class="code-line-content">static_cast&lt;GLsizei&gt;(Texture[Layer][Level].dimensions().x), </span></li><li class="code-line"><span style="padding-left:128px" class="code-line-content">static_cast&lt;GLsizei&gt;(Texture[Layer][Level].dimensions().y), </span></li><li class="code-line"><span style="padding-left:128px" class="code-line-content">static_cast&lt;GLsizei&gt;(1), </span></li><li class="code-line"><span style="padding-left:128px" class="code-line-content">static_cast&lt;GLenum&gt;(gli::external_format(Texture.format())), </span></li><li class="code-line"><span style="padding-left:128px" class="code-line-content">static_cast&lt;GLsizei&gt;(Texture[Layer][Level].size()), </span></li><li class="code-line"><span style="padding-left:128px" class="code-line-content">Texture[Layer][Level].data()); </span></li><li class="code-line"><span style="padding-left:64px" class="code-line-content">}</span></li><li class="code-line"><span style="padding-left:32px" class="code-line-content">}</span></li><li class="code-line"><span style="padding-left:32px" class="code-line-content"><span class="keyword">else</span></span></li><li class="code-line"><span style="padding-left:32px" class="code-line-content">{</span></li><li class="code-line"><span style="padding-left:64px" class="code-line-content"><span class="keyword">for</span>(gli::texture2DArray::size_type Layer = 0; Layer &lt; Texture.layers(); ++Layer)</span></li><li class="code-line"><span style="padding-left:64px" class="code-line-content"><span class="keyword">for</span>(gli::texture2DArray::size_type Level = 0; Level &lt; Texture.levels(); ++Level)</span></li><li class="code-line"><span style="padding-left:64px" class="code-line-content">{</span></li><li class="code-line"><span style="padding-left:96px" class="code-line-content">glTexSubImage3D(Target, </span></li><li class="code-line"><span style="padding-left:128px" class="code-line-content">static_cast&lt;GLint&gt;(Level), </span></li><li class="code-line"><span style="padding-left:128px" class="code-line-content">0, 0, static_cast&lt;GLint&gt;(Layer), </span></li><li class="code-line"><span style="padding-left:128px" class="code-line-content">static_cast&lt;GLsizei&gt;(Texture[Layer][Level].dimensions().x), </span></li><li class="code-line"><span style="padding-left:128px" class="code-line-content">static_cast&lt;GLsizei&gt;(Texture[Layer][Level].dimensions().y), </span></li><li class="code-line"><span style="padding-left:128px" class="code-line-content">static_cast&lt;GLsizei&gt;(1), </span></li><li class="code-line"><span style="padding-left:128px" class="code-line-content">static_cast&lt;GLenum&gt;(gli::external_format(Texture.format())), </span></li><li class="code-line"><span style="padding-left:128px" class="code-line-content">static_cast&lt;GLenum&gt;(gli::type_format(Texture.format())), </span></li><li class="code-line"><span style="padding-left:128px" class="code-line-content">Texture[Layer][Level].data()); </span></li><li class="code-line"><span style="padding-left:64px" class="code-line-content">}</span></li><li class="code-line"><span style="padding-left:32px" class="code-line-content">}</span></li><li class="code-line"><span class="code-line-content">}</span></li><li class="code-line"><span class="code-line-content"><span class="keyword">else</span></span></li><li class="code-line"><span class="code-line-content">{</span></li><li class="code-line"><span style="padding-left:32px" class="code-line-content">gli::texture2D Texture(Storage);</span></li><li class="code-line"><span style="padding-left:32px" class="code-line-content" /></li><li class="code-line"><span style="padding-left:32px" class="code-line-content">glTexStorage2D(Target, static_cast&lt;GLint&gt;(Texture.levels()),</span></li><li class="code-line"><span style="padding-left:64px" class="code-line-content">static_cast&lt;GLenum&gt;(gli::internal_format(Texture.format())),</span></li><li class="code-line"><span style="padding-left:64px" class="code-line-content">static_cast&lt;GLsizei&gt;(Texture.dimensions().x), static_cast&lt;GLsizei&gt;(Texture.dimensions().y));</span></li><li class="code-line"><span style="padding-left:32px" class="code-line-content" /></li><li class="code-line"><span style="padding-left:32px" class="code-line-content"><span class="keyword">if</span>(gli::is_compressed(Texture.format()))</span></li><li class="code-line"><span style="padding-left:32px" class="code-line-content">{</span></li><li class="code-line"><span style="padding-left:64px" class="code-line-content"><span class="keyword">for</span>(gli::texture2D::size_type Level = 0; Level &lt; Texture.levels(); ++Level)</span></li><li class="code-line"><span style="padding-left:64px" class="code-line-content">{</span></li><li class="code-line"><span style="padding-left:96px" class="code-line-content">glCompressedTexSubImage2D(Target, </span></li><li class="code-line"><span style="padding-left:128px" class="code-line-content">static_cast&lt;GLint&gt;(Level), 0, 0,</span></li><li class="code-line"><span style="padding-left:128px" class="code-line-content">static_cast&lt;GLsizei&gt;(Texture[Level].dimensions().x), </span></li><li class="code-line"><span style="padding-left:128px" class="code-line-content">static_cast&lt;GLsizei&gt;(Texture[Level].dimensions().y), </span></li><li class="code-line"><span style="padding-left:128px" class="code-line-content">static_cast&lt;GLenum&gt;(gli::external_format(Texture.format())), </span></li><li class="code-line"><span style="padding-left:128px" class="code-line-content">static_cast&lt;GLsizei&gt;(Texture[Level].size()), </span></li><li class="code-line"><span style="padding-left:128px" class="code-line-content">Texture[Level].data()); </span></li><li class="code-line"><span style="padding-left:64px" class="code-line-content">}</span></li><li class="code-line"><span style="padding-left:32px" class="code-line-content">}</span></li><li class="code-line"><span style="padding-left:32px" class="code-line-content"><span class="keyword">else</span></span></li><li class="code-line"><span style="padding-left:32px" class="code-line-content">{</span></li><li class="code-line"><span style="padding-left:64px" class="code-line-content"><span class="keyword">for</span>(gli::texture2D::size_type Level = 0; Level &lt; Texture.levels(); ++Level)</span></li><li class="code-line"><span style="padding-left:64px" class="code-line-content">{</span></li><li class="code-line"><span style="padding-left:96px" class="code-line-content">glTexSubImage2D(Target, </span></li><li class="code-line"><span style="padding-left:128px" class="code-line-content">static_cast&lt;GLint&gt;(Level), 0, 0,</span></li><li class="code-line"><span style="padding-left:128px" class="code-line-content">static_cast&lt;GLsizei&gt;(Texture[Level].dimensions().x), </span></li><li class="code-line"><span style="padding-left:128px" class="code-line-content">static_cast&lt;GLsizei&gt;(Texture[Level].dimensions().y), </span></li><li class="code-line"><span style="padding-left:128px" class="code-line-content">static_cast&lt;GLenum&gt;(gli::external_format(Texture.format())), </span></li><li class="code-line"><span style="padding-left:128px" class="code-line-content">static_cast&lt;GLenum&gt;(gli::type_format(Texture.format())), </span></li><li class="code-line"><span style="padding-left:128px" class="code-line-content">Texture[Level].data()); </span></li><li class="code-line"><span style="padding-left:64px" class="code-line-content">}</span></li><li class="code-line"><span style="padding-left:32px" class="code-line-content">}</span></li><li class="code-line"><span class="code-line-content">}</span></li></ul><span class="code-title">Create a texture with GLI 0.5 and save it to a DDS file:</span><ul class="code-list"><li class="code-line"><span class="code-line-content"><span class="keyword">#include </span><span class="string">&lt;glm/glm.hpp&gt;</span></span></li><li class="code-line"><span class="code-line-content"><span class="keyword">#include </span><span class="string">&lt;gli/gli.hpp&gt;</span></span></li><li class="code-line"><span class="code-line-content" /></li><li class="code-line"><span class="code-line-content"><span class="comment">// Allocated a 32 bits texture with one mipmap level</span></span></li><li class="code-line"><span class="code-line-content">gli::texture2D Texture(3, gli::RGBA8_UNORM, gli::texture2D::dimensions_type(256, 256));</span></li><li class="code-line"><span class="code-line-content" /></li><li class="code-line"><span class="code-line-content">Texture[0].clear(glm::u8vec4(255,   0, 0, 255)));</span></li><li class="code-line"><span class="code-line-content">Texture[1].clear(glm::u8vec4(255, 128, 0, 255)));</span></li><li class="code-line"><span class="code-line-content">Texture[2].clear(glm::u8vec4(255, 255, 0, 255)));</span></li><li class="code-line"><span class="code-line-content" /></li><li class="code-line"><span class="code-line-content">glm::u8vec4 * LinearAddress0 = Texture[0].data&lt;glm::u8vec4&gt;();</span></li><li class="code-line"><span class="code-line-content">glm::u8vec4 * LinearAddress1 = Texture[1].data&lt;glm::u8vec4&gt;();</span></li><li class="code-line"><span class="code-line-content">glm::u8vec4 * LinearAddress2 = Texture[2].data&lt;glm::u8vec4&gt;();</span></li><li class="code-line"><span class="code-line-content">...</span></li><li class="code-line"><span class="code-line-content"><span class="comment">// Do something</span></span></li><li class="code-line"><span class="code-line-content">...</span></li><li class="code-line"><span class="code-line-content">gli::save_dds(Texture, "texture.dds");</span></li></ul></td></tr></table></div></body></html>